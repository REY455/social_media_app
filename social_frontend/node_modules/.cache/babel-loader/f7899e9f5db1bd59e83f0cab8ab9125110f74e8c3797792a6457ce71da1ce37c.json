{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){// Initialize posts as an empty array.\nconst[posts,setPosts]=useState([]);// Fetch posts when the component mounts.\nuseEffect(()=>{fetchPosts();},[]);// Fetch posts from the backend.\nconst fetchPosts=async()=>{try{const response=await axios.get(`${process.env.REACT_APP_BACKEND_URL}/api/posts`);console.log(\"API Response:\",response.data);// If response.data is an array, use it; otherwise, default to an empty array.\nconst postsData=Array.isArray(response.data)?response.data:[];setPosts(postsData);}catch(error){console.error(\"Error fetching posts:\",error);}};// Handler to like a post.\nconst handleLike=async postId=>{try{const response=await axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/posts/like/${postId}`);setPosts(posts.map(post=>post._id===postId?response.data:post));}catch(error){console.error(\"Error liking post:\",error);}};// Handler to delete a post.\nconst handleDelete=async postId=>{try{const response=await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/api/posts/${postId}`);// Remove the deleted post from state.\nsetPosts(posts.filter(post=>post._id!==postId));console.log(response.data.message);}catch(error){console.error(\"Error deleting post:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Posts\"}),Array.isArray(posts)&&posts.length>0?posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"h3\",{children:post.title}),/*#__PURE__*/_jsx(\"p\",{children:post.content}),post.file&&/*#__PURE__*/_jsx(\"div\",{children:post.file.match(/\\.(mp4|webm)$/)?/*#__PURE__*/_jsxs(\"video\",{width:\"320\",height:\"240\",controls:true,children:[/*#__PURE__*/_jsx(\"source\",{src:`${process.env.REACT_APP_BACKEND_URL}/uploads/${post.file}`,type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]}):/*#__PURE__*/_jsx(\"img\",{src:`${process.env.REACT_APP_BACKEND_URL}/uploads/${post.file}`,alt:\"Post Media\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLike(post._id),children:[\"Like (\",post.likes,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(post._id),children:\"Delete\"})]},post._id)):/*#__PURE__*/_jsx(\"p\",{children:\"No posts available.\"})]});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Home","posts","setPosts","fetchPosts","response","get","process","env","REACT_APP_BACKEND_URL","console","log","data","postsData","Array","isArray","error","handleLike","postId","post","map","_id","handleDelete","delete","filter","message","className","children","length","title","content","file","match","width","height","controls","src","type","alt","onClick","likes"],"sources":["C:/Users/ASUS/OneDrive/Desktop/social-media/social_frontend/src/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Home() {\r\n  // Initialize posts as an empty array.\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  // Fetch posts when the component mounts.\r\n  useEffect(() => {\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  // Fetch posts from the backend.\r\n  const fetchPosts = async () => {\r\n    try {\r\n      const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/api/posts`);\r\n      console.log(\"API Response:\", response.data);\r\n      // If response.data is an array, use it; otherwise, default to an empty array.\r\n      const postsData = Array.isArray(response.data) ? response.data : [];\r\n      setPosts(postsData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching posts:\", error);\r\n    }\r\n  };\r\n\r\n  // Handler to like a post.\r\n  const handleLike = async (postId) => {\r\n    try {\r\n      const response = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/posts/like/${postId}`);\r\n      setPosts(posts.map(post => post._id === postId ? response.data : post));\r\n    } catch (error) {\r\n      console.error(\"Error liking post:\", error);\r\n    }\r\n  };\r\n\r\n  // Handler to delete a post.\r\n  const handleDelete = async (postId) => {\r\n    try {\r\n      const response = await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/api/posts/${postId}`);\r\n      // Remove the deleted post from state.\r\n      setPosts(posts.filter(post => post._id !== postId));\r\n      console.log(response.data.message);\r\n    } catch (error) {\r\n      console.error(\"Error deleting post:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <h2>Recent Posts</h2>\r\n      {/* Ensure posts is an array before mapping */}\r\n      {Array.isArray(posts) && posts.length > 0 ? (\r\n        posts.map(post => (\r\n          <div key={post._id} className=\"post\">\r\n            <h3>{post.title}</h3>\r\n            <p>{post.content}</p>\r\n            {post.file && (\r\n              <div>\r\n                {post.file.match(/\\.(mp4|webm)$/) ? (\r\n                  <video width=\"320\" height=\"240\" controls>\r\n                    <source src={`${process.env.REACT_APP_BACKEND_URL}/uploads/${post.file}`} type=\"video/mp4\" />\r\n                    Your browser does not support the video tag.\r\n                  </video>\r\n                ) : (\r\n                  <img src={`${process.env.REACT_APP_BACKEND_URL}/uploads/${post.file}`} alt=\"Post Media\" />\r\n                )}\r\n              </div>\r\n            )}\r\n            <button onClick={() => handleLike(post._id)}>Like ({post.likes})</button>\r\n            <button onClick={() => handleDelete(post._id)}>Delete</button>\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <p>No posts available.</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}