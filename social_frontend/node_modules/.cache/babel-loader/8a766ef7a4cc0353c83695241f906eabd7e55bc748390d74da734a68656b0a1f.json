{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useParams,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UpdatePost(){const{postId}=useParams();const navigate=useNavigate();const[postData,setPostData]=useState({title:'',content:''});const[file,setFile]=useState(null);useEffect(()=>{// Fetch the post details using the postId from the URL\naxios.get(\"${API_BASE_URL}/api/posts\").then(response=>{const post=response.data.find(p=>p._id===postId);if(post){setPostData({title:post.title,content:post.content});}else{alert(\"Post not found\");navigate(\"/\");}}).catch(error=>console.error(\"Error fetching post data:\",error));},[postId,navigate]);const handleChange=e=>{setPostData({...postData,[e.target.name]:e.target.value});};const handleSubmit=e=>{e.preventDefault();const formData=new FormData();formData.append(\"title\",postData.title);formData.append(\"content\",postData.content);if(file){formData.append(\"file\",file);}axios.put(`${API_BASE_URL}/api/posts/${postId}`,formData).then(response=>{console.log(\"Post updated:\",response.data);navigate(\"/\");}).catch(error=>console.error(\"Error updating post:\",error));};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-post\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",placeholder:\"Title\",value:postData.title,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"content\",placeholder:\"Content\",value:postData.content,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setFile(e.target.files[0])}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update Post\"})]})]});}export default UpdatePost;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","UpdatePost","postId","navigate","postData","setPostData","title","content","file","setFile","get","then","response","post","data","find","p","_id","alert","catch","error","console","handleChange","e","target","name","value","handleSubmit","preventDefault","formData","FormData","append","put","API_BASE_URL","log","className","children","onSubmit","type","placeholder","onChange","files"],"sources":["C:/Users/ASUS/OneDrive/Desktop/social-media/social_frontend/src/UpdatePost.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\n\r\nfunction UpdatePost() {\r\n  const { postId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [postData, setPostData] = useState({ title: '', content: '' });\r\n  const [file, setFile] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Fetch the post details using the postId from the URL\r\n    axios.get(\"${API_BASE_URL}/api/posts\")\r\n      .then(response => {\r\n        const post = response.data.find(p => p._id === postId);\r\n        if (post) {\r\n          setPostData({ title: post.title, content: post.content });\r\n        } else {\r\n          alert(\"Post not found\");\r\n          navigate(\"/\");\r\n        }\r\n      })\r\n      .catch(error => console.error(\"Error fetching post data:\", error));\r\n  }, [postId, navigate]);\r\n\r\n  const handleChange = (e) => {\r\n    setPostData({\r\n      ...postData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append(\"title\", postData.title);\r\n    formData.append(\"content\", postData.content);\r\n    if (file) {\r\n      formData.append(\"file\", file);\r\n    }\r\n    axios.put(`${API_BASE_URL}/api/posts/${postId}`, formData)\r\n      .then(response => {\r\n        console.log(\"Post updated:\", response.data);\r\n        navigate(\"/\");\r\n      })\r\n      .catch(error => console.error(\"Error updating post:\", error));\r\n  };\r\n\r\n  return (\r\n    <div className=\"create-post\">\r\n      <h2>Update Post</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <input \r\n          type=\"text\"\r\n          name=\"title\"\r\n          placeholder=\"Title\"\r\n          value={postData.title}\r\n          onChange={handleChange}\r\n        /><br/>\r\n        <textarea \r\n          name=\"content\"\r\n          placeholder=\"Content\"\r\n          value={postData.content}\r\n          onChange={handleChange}\r\n        /><br/>\r\n        <input \r\n          type=\"file\"\r\n          onChange={e => setFile(e.target.files[0])}\r\n        /><br/>\r\n        <button type=\"submit\">Update Post</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UpdatePost;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}